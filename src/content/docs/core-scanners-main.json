{
  "id": "main_scanners",
  "title": "Main Scanners",
  "description": "This documentation covers the various scanners that identify technologies in code repositories, detailing their implementation and data structures.",
  "content_markdown": "# Main Scanners\n\nThe Main Scanners module provides a robust framework for identifying various technologies utilized within code repositories. The scanning process encompasses a variety of programming languages and configuration files, ensuring a comprehensive analysis of each project's technical stack. This document delves into the core components of the scanning architecture, describing their functionalities, data structures, and error handling mechanisms.\n\n## Module Structure\n\nThe scanning functionality is organized into several key files, each responsible for specific tasks:\n\n- **Core Files**\n  - `scan_readme.py`\n  - `technology_scanner.py`\n  - `base.py`\n  \n- **Technology-Specific Scanners**\n  - `python.py`\n  - `javascript.py`\n  - `docker.py`\n  - `database.py`\n  \n- **Metadata Definitions**\n  - `metadata/docker_config.py`\n  - `metadata/javascript_frameworks.py`\n  - `metadata/database_config.py`\n  - `metadata/python_frameworks.py`\n\n## Core Functionality\n\n### 1. Scanning README Files\n\n**File:** `scan_readme.py`\n\nThe `scan_readme.py` script implements a function, `scan_readme`, designed to locate and gather metadata from README files within a specified directory hierarchy.\n\n#### Key Features:\n- **Recursive Search:** Uses the `Path.rglob` method to traverse the directory and find files named 'README'.\n- **Metadata Collection:** Gathers essential file attributes such as:\n  - `file_path`: The location of the README file.\n  - `filename`: The name of the file.\n  - `file_extension`: The type of file.\n  - `size_in_bytes`: The size of the file in bytes.\n  - `first_line`: The content of the first line.\n  \n#### Error Handling:\n- Incorporates a try-except block around the file reading operations. If a file might cause an error (for instance, due to permission issues), the overall process continues without interruption, ensuring robust behavior.\n\n#### Output Format:\nThe return value is a dictionary that indicates whether any README files were found, accompanied by a list of collected metadata.\n\n```python\ndef scan_readme(repo_path):\n    # Implementation here...\n```\n\n### 2. Technology Scanner Framework\n\n**File:** `technology_scanner.py`\n\nThe `TechnologyScanner` class is pivotal for coordinating the detection of various technologies across different ecosystems such as Python, JavaScript, Docker, and databases.\n\n#### Key Features:\n- **Modular Architecture:** This scanner architecture allows easy extensibility by adding new scanners for additional technologies.\n- **Logging Mechanism:** Leveraging the `get_logger` function, this class logs key events and errors throughout the scanning process for better monitoring.\n\n#### Scan Execution:\nThe `scan` method activates each specialized scanner to collect relevant data.\n\n```python\nclass TechnologyScanner:\n    def scan(self):\n        # Implementation here...\n```\n\n#### Error Handling:\nContinues scanning even if errors are encountered in any individual scanner, thus maintaining the overall process flow.\n\n### 3. Technology-Specific Scanners\n\nEach technology scanner is responsible for detecting files and frameworks particular to programming languages and configurations.\n\n#### 3.1 Python Scanner\n\n**File:** `python.py`\n\nThe `PythonScanner` class focuses on identifying Python-related technologies by scanning `.py` files, Jupyter notebooks, and configuration files related to frameworks.\n\nKey Components:\n- **Dependency Management:** Extracts frameworks listed in `requirements.txt` and `pyproject.toml`.\n- **File Iteration:** Excludes irrelevant directories, streamlining the scanning process.\n\nOutput structure:\nReturns a summary dictionary containing counts of identified files and frameworks.\n\n```python\nclass PythonScanner:\n    def scan(self):\n        # Implementation here...\n```\n\n#### 3.2 JavaScript Scanner\n\n**File:** `javascript.py`\n\nSimilar to the Python scanner, the `JavaScriptScanner` identifies JavaScript and TypeScript technologies and collects dependencies from `package.json`.\n\nKey Components:\n- **Dependency Extraction:** Retrieves the necessary information from both `dependencies` and `devDependencies`.\n\nOutput structure:\nFormatted as a structured dictionary summarizing the information found.\n\n```python\nclass JavaScriptScanner:\n    def scan(self):\n        # Implementation here...\n```\n\n#### 3.3 Docker Scanner\n\n**File:** `docker.py`\n\nThe `DockerScanner` focuses on identifying Docker configuration files in the repository.\n\nKey Components:\n- **File Iteration:** Searches throughout the repository for all relevant Docker configuration files.\n\nOutput Structure:\nReturns detailed counts and paths of detected Dockerfiles, Docker Compose files, and Docker Ignore files.\n\n```python\nclass DockerScanner:\n    def scan(self):\n        # Implementation here...\n```\n\n#### 3.4 Database Scanner\n\n**File:** `database.py`\n\nThe `DatabaseScanner` focuses on detecting database-related files, scanning for both file types and directory structures indicative of database usage.\n\nKey Features:\n- **Database Detection Logic:** Checks file extensions against known binary and script patterns.\n\nOutput Structure:\nSystematic summary of identified database-related files.\n\n```python\nclass DatabaseScanner:\n    def scan(self):\n        # Implementation here...\n```\n\n## Data Structure Overview\n\nIn the context of scanning operations, structured data representations play a crucial role. Hereâ€™s an overview of the primary output formats from the various scanners:\n\n| Scanner         | Output Type                                                                              |\n|------------------|------------------------------------------------------------------------------------------|\n| `PythonScanner`  | Dictionary summarizing Python files, notebooks, frameworks, and package managers.       |\n| `JavaScriptScanner` | Dictionary summarizing JavaScript and TypeScript files, frameworks, and their counts. |\n| `DockerScanner`  | Dictionary of Dockerfile paths, counts, and related configurations.                     |\n| `DatabaseScanner`| Summary of detected database files and directory structures.                             |\n\n## Error Logging\n\nThroughout the scanning processes, structured logging is incorporated to document the events and errors accurately. Utilizing `app.core.logger`, all logs can be directed to both console and file outputs depending on configurations set in the `settings`.\n\nThis comprehensive logging mechanism aids developers in debugging and provides insights during the scanning operations, ensuring that they can maintain and extend the scanning capabilities effectively.\n\n## Conclusion\n\nThe Main Scanners module represents a sophisticated toolset dedicated to scanning code repositories for various technologies. By utilizing modular classes and structured error handling strategies, it enhances both robust scanning capabilities and developer productivity. Each scanner operates cohesively within a broader ecosystem of technologies, ensuring that developers can gather relevant insights with ease.\n\n```mermaid\ngraph TD;\n    A[Repository] -->|Scan| B[README]\n    A -->|Scan| C[Python Files]\n    A -->|Scan| D[JavaScript Files]\n    A -->|Scan| E[Docker Files]\n    A -->|Scan| F[Database Files]\n    B --> G{Metadata}\n    C --> H{Python Frameworks}\n    D --> I{JavaScript Frameworks}\n    E --> J{Docker Configs}\n    F --> K{Database Files}\n```",
  "diagram_mermaid": "graph TD;\n    A[Repository] -->|Scan| B[README]\n    A -->|Scan| C[Python Files]\n    A -->|Scan| D[JavaScript Files]\n    A -->|Scan| E[Docker Files]\n    A -->|Scan| F[Database Files]\n    B --> G{Metadata}\n    C --> H{Python Frameworks}\n    D --> I{JavaScript Frameworks}\n    E --> J{Docker Configs}\n    F --> K{Database Files}",
  "related_files": [
    "app/agents/core/types.py",
    "app/agents/core/prompt_loader.py",
    "app/agents/core/factory.py",
    "app/agents/core/base.py",
    "app/agents/core/ollama_client.py",
    "app/agents/core/pipeline.py",
    "app/agents/core/openai_client.py",
    "app/core/logger.py",
    "app/core/database.py",
    "app/core/config.py",
    "app/scanners/scan_readme.py",
    "app/scanners/technology_scanner.py",
    "app/scanners/technologies/python.py",
    "app/scanners/technologies/javascript.py",
    "app/scanners/technologies/docker.py",
    "app/scanners/technologies/database.py",
    "app/scanners/base.py",
    "app/scanners/technologies/metadata/docker_config.py",
    "app/scanners/technologies/metadata/javascript_frameworks.py",
    "app/scanners/technologies/metadata/database_config.py",
    "app/scanners/technologies/metadata/python_frameworks.py"
  ]
}