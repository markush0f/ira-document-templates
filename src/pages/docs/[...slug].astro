---
import { getEntry } from "astro:content";
import DocLayout from "../../layouts/DocLayout.astro";
import { getAllDocs } from "../../lib/docs";

const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect('/docs/404');
}

// Fetch the document
let doc = await getEntry("docs", slug);

// If not found, try to find in all docs (legacy fallback)
if (!doc) {
  return Astro.redirect('/docs/404');
}

const { data } = doc;
---

<DocLayout title={data.title} slug={doc.id} rawDoc={data}>
  <!-- Content is now handled reactively by AppShell and DocRenderer -->
</DocLayout>
